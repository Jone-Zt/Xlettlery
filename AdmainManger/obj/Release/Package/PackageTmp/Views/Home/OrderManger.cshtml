
@{
    Layout = null;
}
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>订单管理</title>
    <script src="~/Scripts/jquery-1.9.1.min.js"></script>
    <script src="~/Scripts/front-endPage.js"></script>
    <link href="~/Content/table.css" rel="stylesheet" />
    <link href="~/Content/bootstrap.min.css" rel="stylesheet" />
    <link href="~/Content/bootstrap-theme.min.css" rel="stylesheet" />
    <script>
        $(function () {
            QueryOrder()
        })
        function QueryOrder() {
            var key = $("#OrderType").val();
            console.log(key);
            if (key != "") {
                $.ajax({
                    type: "POST",
                    url: "./QueryOrder",
                    dataType: "json",
                    data: { id: 1 },
                    success: function (data) {
                        //前台分页的样子
                        $.each(data.value, function (index, item) {
                            item.OrderTime = formatDate(getDate(item.OrderTime));
                            if (item.Status == 0) item.Status = "成功";
                            else if (item.Status == 1) item.Status = "失败";
                            else item.Status = "待支付";
                        })
                        $('#histroyBox').CJJTable({
                            'title': ["订单编号", "订单用户", "订单时间", "订单通道", "订单状态", "操作"],//thead中的标题 必填
                            'body': ["OrderID", "AccountID", "OrderTime", "ChannelID", "Status", "Option"],//tbody td 取值的字段 必填
                            'display': [1, 1, 1, 1, 1, 2],//隐藏域，1显示，2隐藏 必填
                            'pageNUmber': 10,//每页显示的条数 选填
                            'pageLength': data.value.length,//选填
                            'url': data.value,//数据源 必填
                            dbTrclick: function (e) {//双击tr事件
                                alert(e.find('.OrderID').html())
                            }
                        });
                    }
                })
            }
        }
        function getDate(str_time) {
            var re = new RegExp('\\/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\/');
            var r = (str_time || '').match(re);
            var format = r ? new Date(((r[1] || '') + r[2]) * 1) : null;
            return r ? new Date(((r[1] || '') + r[2]) * 1) : null;
        }
        function formatDate(now) {
            var year = now.getYear() + 1900;
            var month = now.getMonth() + 1;
            var date = now.getDate();
            var hour = now.getHours();
            var minute = now.getMinutes();
            var second = now.getSeconds();
            return year + "-" + month + "-" + date + " " + hour + ":" + minute + ":" + second;
        }
    </script>
</head>
<body>
    <form class="form-inline container" role="form">
        <div class="form-group">
            <label class="label label-info" for="name">用户名:</label>
            <input type="text" class="form-control" id="name"
                   placeholder="用户名查询">
        </div>
        </form>
        <div id="histroyBox">

        </div>
        <script type="text/javascript">

        </script>
        <div style="text-align:center;">

        </div>
</body>
</html>
